{
  "branch": "feat/564-dungeon-generation",
  "issues": ["#564"],
  "goal": "Move dungeon generation from rpg-api prototype into toolkit dungeon module. API configures, toolkit generates.",
  "design_doc": "docs/plans/2026-01-11-dungeon-generation-design.md",
  "sessions": [
    {
      "id": "2026-01-11-001",
      "task": "Create design document for dungeon generation",
      "status": "completed",
      "artifacts": [
        "docs/plans/2026-01-11-dungeon-generation-design.md"
      ],
      "commit": "199c487",
      "notes": "Design covers public API, theme structure, internal components, testing strategy"
    },
    {
      "id": "2026-01-11-002",
      "task": "Create errors.go with validation error definitions",
      "status": "completed",
      "artifacts": [
        "rulebooks/dnd5e/dungeon/errors.go"
      ],
      "commit": "0cbefd3",
      "notes": "Added ErrNilInput, ErrInvalidTheme, ErrInvalidCR, ErrInvalidRoomCount using rpgerr package"
    },
    {
      "id": "2026-01-11-003",
      "task": "Create theme.go with Theme struct, WallMaterial, MonsterRef, and predefined themes",
      "status": "completed",
      "artifacts": [
        "rulebooks/dnd5e/dungeon/theme.go"
      ],
      "commit": "356cb31",
      "notes": "Created WallMaterial typed constant, MonsterRef struct, Theme struct with selectables-based monster/boss pools, RoomTables from environments package, and three predefined themes (ThemeCrypt, ThemeCave, ThemeBanditLair). Added GetTheme() and GetThemeIDs() for lookup."
    },
    {
      "id": "2026-01-11-004",
      "task": "Create encounter.go with internal budget allocation and encounter generation logic",
      "status": "completed",
      "artifacts": [
        "rulebooks/dnd5e/dungeon/encounter.go"
      ],
      "commit": "6c4e83a",
      "notes": "Created internal functions: allocateBudget (40% boss / 60% other rooms with difficulty ramping), generateEncounter (fills budget from selection pools), seededRoller (math/rand for reproducibility). All functions use nolint:unused since they're called by generator.go in session 005."
    },
    {
      "id": "2026-01-11-005",
      "task": "Create generator.go with Generator, GenerateInput/Output, and Generate method",
      "status": "pending",
      "artifacts": [],
      "commit": null,
      "notes": "Orchestrates layout generation, encounter allocation, monster placement. Returns *Dungeon."
    },
    {
      "id": "2026-01-11-006",
      "task": "Create unit tests for theme and encounter logic",
      "status": "pending",
      "artifacts": [],
      "commit": null,
      "notes": "theme_test.go and encounter_test.go"
    },
    {
      "id": "2026-01-11-007",
      "task": "Create integration tests for generator",
      "status": "pending",
      "artifacts": [],
      "commit": null,
      "notes": "generator_test.go - full pipeline tests with real components"
    },
    {
      "id": "2026-01-11-008",
      "task": "Create example/ directory with README and narrated example tests",
      "status": "pending",
      "artifacts": [],
      "commit": null,
      "notes": "Living documentation per issue #564 pattern"
    }
  ],
  "next_steps": [
    "Start with errors.go (simple, no dependencies)",
    "Then theme.go (defines data structures)",
    "Then encounter.go (uses themes)",
    "Then generator.go (orchestrates everything)",
    "Then tests and examples"
  ]
}
