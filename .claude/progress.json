{
  "branch": "feature/fighter-levels-1-3-388",
  "issues": ["#388"],
  "goal": "Implement Fighter class levels 1-3: Defense and Two-Weapon Fighting styles, verify Second Wind, implement Action Surge, and Improved Critical (Champion subclass)",
  "analysis": {
    "already_implemented": [
      "Fighting Styles: Archery, Dueling, Great Weapon Fighting",
      "SecondWind feature (but uses old resources.Resource, not RecoverableResource)",
      "ActionEconomy with GrantExtraAction()",
      "RecoverableResource with automatic recovery on rest",
      "FightingStyleCondition infrastructure",
      "gamectx.CharacterRegistry with GetCharacterWeapons() for weapon slot info"
    ],
    "infrastructure_gaps": [
      "No AC calculation chain - needed for Defense style",
      "No critical threshold modifier system - needed for Improved Critical"
    ],
    "patterns_to_follow": [
      "Use gamectx.Characters(ctx) to get weapon info (see Dueling implementation)",
      "Compare AttackEvent.WeaponRef with OffHand().ID to detect off-hand attacks",
      "Follow FightingStyleCondition pattern for new fighting styles"
    ]
  },
  "sessions": [],
  "completed": false,
  "next_steps": [
    "Task 1: Implement Two-Weapon Fighting style (use gamectx to detect off-hand attacks)",
    "Task 2: Create ACChain for AC modifiers (like AttackChain/DamageChain)",
    "Task 3: Implement Defense fighting style using ACChain",
    "Task 4: Refactor SecondWind to use RecoverableResource for automatic recovery",
    "Task 5: Implement Action Surge feature using ActionEconomy.GrantExtraAction()",
    "Task 6: Add critical threshold to AttackChainEvent for Improved Critical",
    "Task 7: Implement Improved Critical (Champion subclass) condition"
  ]
}
