{
  "branch": "feature/unify-damage-flow",
  "issues": [],
  "goal": "Unify damage flow: ResolveAttack uses ResolveDamage, remove duplicate applyDamageChain, preserve full DamageComponent breakdown for combat log",
  "sessions": [
    {
      "id": "2024-12-25-004",
      "task": "Refactor DealDamage to accept pre-built components",
      "status": "completed",
      "artifacts": [
        "rulebooks/dnd5e/combat/damage.go",
        "rulebooks/dnd5e/combat/damage_test.go"
      ],
      "commit": null,
      "notes": "Extended DealDamageInput to accept either Instances OR Components. Added ResolveDamage function for shared chain processing."
    },
    {
      "id": "2024-12-25-005",
      "task": "Refactor ResolveAttack to use ResolveDamage, remove applyDamageChain",
      "status": "completed",
      "artifacts": [
        "rulebooks/dnd5e/combat/attack.go"
      ],
      "commit": null,
      "notes": "ResolveAttack now uses ResolveDamage for damage chain. Removed duplicate applyDamageChain. Added attack-specific fields (WeaponDamage, AbilityUsed, WeaponRef) to ResolveDamageInput for GWF and similar modifiers."
    }
  ],
  "next_steps": [
    "Commit changes",
    "Create PR for review"
  ]
}
