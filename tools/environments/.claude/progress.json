{
  "branch": "feat/dungeon-data-structure",
  "issues": ["#540"],
  "goal": "Define generic EnvironmentData persistence structure with absolute coordinates",
  "design_doc": "docs/plans/2026-01-08-unified-dungeon-coordinate-system-design.md",
  "sessions": [
    {
      "id": "2026-01-08-001",
      "task": "Define DungeonData and all supporting structs with JSON serialization tests",
      "status": "completed",
      "artifacts": [
        "tools/environments/dungeon_data.go",
        "tools/environments/dungeon_data_test.go"
      ],
      "commit": "5951caf",
      "notes": "Initial implementation - too D&D-specific for environments package"
    },
    {
      "id": "2026-01-08-002",
      "task": "Refactor to generic EnvironmentData (dungeons are rulebook concept)",
      "status": "completed",
      "artifacts": [
        "tools/environments/environment_data.go",
        "tools/environments/environment_data_test.go"
      ],
      "commit": "45beb25",
      "notes": "Renamed to generic types: EnvironmentData, ZoneData, PassageData, PlacedEntityData, WallSegmentData. Entity types are now game-defined strings. DungeonData will be added to rulebooks/dnd5e/dungeon composing this."
    },
    {
      "id": "2026-01-08-003",
      "task": "Add ToData/LoadFromData persistence methods",
      "status": "completed",
      "artifacts": [
        "tools/environments/environment_persistence.go",
        "tools/environments/environment_persistence_test.go"
      ],
      "commit": "8eae4bd",
      "notes": "Added proper persistence pattern: ToData() converts BasicEnvironment to EnvironmentData with absolute coordinates, LoadFromData() reconstructs from persisted data. Includes persistedEntity type and round-trip tests."
    }
  ],
  "next_steps": [
    "Merge this PR and let CI bump environments version",
    "Create DungeonData in rulebooks/dnd5e/dungeon that composes EnvironmentData"
  ]
}
